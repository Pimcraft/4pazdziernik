<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DomÃ³wka: Kuchnie Åšwiata!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-color: #16213e;
            --primary-color: #e94560;
            --text-color: #e0e0e0;
            --text-muted: #a7a7a7;
            --border-color: #0f3460;
            --border-radius: 16px;
            --font-main: 'Poppins', sans-serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font-main); background-color: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 2rem 1rem; }
        .container { background-color: var(--card-color); border: 1px solid var(--border-color); padding: 2rem 2.5rem; border-radius: var(--border-radius); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); width: 100%; max-width: 900px; text-align: center; transition: all 0.3s ease; margin-bottom: 2rem; }
        h1, h2, h3 { font-weight: 700; margin-bottom: 1rem; }
        h1 { color: var(--primary-color); font-size: 2.5rem; }
        h2 { font-size: 1.8rem; }
        h3 { font-size: 1.2rem; color: var(--text-muted); }
        p { color: var(--text-muted); line-height: 1.6; margin-bottom: 1.5rem; }
        .lore-section { text-align: left; margin: 2rem 0; padding: 1.5rem; background-color: rgba(15, 52, 96, 0.3); border-radius: var(--border-radius); border-left: 4px solid var(--primary-color); }
        .lore-section p { margin-bottom: 0.5rem; }
        .button-group { display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; }
        button, .button { background: var(--primary-color); color: white; border: none; padding: 0.8rem 1.8rem; border-radius: 50px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-decoration: none; display: inline-block; }
        button:hover, .button:hover { transform: translateY(-3px); box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4); }
        button:disabled { background-color: #555; cursor: not-allowed; transform: none; box-shadow: none; }
        button.secondary { background: var(--border-color); }
        .form-group { margin: 1.5rem 0; text-align: left; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem; color: var(--text-muted); }
        select, .radio-group { width: 100%; background: var(--bg-color); border: 1px solid var(--border-color); color: var(--text-color); padding: 0.8rem 1rem; border-radius: 8px; font-size: 1rem; font-family: var(--font-main); }
        .radio-group { display: flex; justify-content: space-around; }
        
        /* --- NOWE STYLE ANIMACJI --- */
        #carousel-container {
            height: 120px;
            width: 100%;
            margin: 2rem auto;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
        }
        #carousel-track {
            display: flex;
            position: relative;
            left: 50%;
        }
        .carousel-item {
            flex-shrink: 0;
            width: 100px;
            height: 100px;
            margin: 0 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: var(--border-color);
            border-radius: 10px;
            transition: transform 0.3s ease;
        }
        .carousel-item .icon { font-size: 2.5rem; }
        .carousel-item .name { font-size: 0.8rem; font-weight: 600; margin-top: 5px; }

        #carousel-pointer {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background-color: var(--primary-color);
            z-index: 10;
            box-shadow: 0 0 10px var(--primary-color);
        }

        /* Klasa dodawana do uruchomienia animacji */
        .spinning {
            transition: left 5s cubic-bezier(0.25, 1, 0.5, 1);
        }

        #results-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        #results-table th, #results-table td { padding: 0.8rem 1rem; text-align: left; }
        #results-table thead { background-color: var(--border-color); }
        #results-table tbody tr { border-bottom: 1px solid var(--border-color); }
        #results-table tbody tr:nth-child(even) { background-color: rgba(15, 52, 96, 0.3); }
        .hidden { display: none !important; }
        
         /* --- NOWE STYLE SEKCJI SZCZEGÃ“ÅÃ“W --- */
        .details-section {
            text-align: left;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }
        .details-section h2 {
            text-align: center;
            color: var(--primary-color);
        }
        .details-box {
            background-color: rgba(15, 52, 96, 0.3);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-top: 2rem;
        }
        .details-box h3 {
            color: var(--text-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .transport-table {
            width: 100%;
            font-size: 0.9rem;
        }
        .transport-table td {
            padding: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .transport-table td:first-child {
            width: 140px;
            white-space: nowrap;
        }
        .map-gallery {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: center;
        }
        .map-gallery img {
            width: 31%;
            border-radius: 8px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .map-gallery img:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(233, 69, 96, 0.5);
        }
        
        /* --- STYLE MODALA (POWIÄ˜KSZONEGO ZDJÄ˜CIA) --- */
        #lightbox {
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        #lightbox.active {
            opacity: 1;
            visibility: visible;
        }
        #lightbox img {
            max-width: 90%;
            max-height: 90%;
            border-radius: var(--border-radius);
        }
        #lightbox .close {
            position: absolute;
            top: 2rem;
            right: 2rem;
            font-size: 3rem;
            color: white;
            cursor: pointer;
        }
         .transport-icon {
            display: inline-block;
            width: 30px;
            text-align: center;
        }
		/* --- NOWE STYLE PODSUMOWANIA --- */
Â  Â  Â  Â  #summary-stats {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-around;
Â  Â  Â  Â  Â  Â  background-color: rgba(15, 52, 96, 0.4);
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  margin: 1.5rem 0;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }
Â  Â  Â  Â  #summary-stats strong {
Â  Â  Â  Â  Â  Â  color: var(--primary-color);
Â  Â  Â  Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  Â  Â  Â  margin-left: 0.5rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  #results-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        /* --- NOWE STYLE GALERII KUCHNI --- */
		.cuisine-gallery {
		    display: flex;           /* Ustawia elementy w rzÄ™dzie */
		    flex-wrap: wrap;         /* Pozwala elementom zawijaÄ‡ siÄ™ do nowego wiersza */
		    justify-content: center; /* WyÅ›rodkowuje kafelki w poziomie */
		    gap: 8px;                /* Tworzy maÅ‚y odstÄ™p miÄ™dzy kafelkami */
		    margin-top: 1.5rem;      /* OdstÄ™p od nagÅ‚Ã³wka "Pula DostÄ™pnych Kuchni" */
		}

		/* --- MOBILE ULEPSZENIA DLA SEKCIJI SZCZEGÃ“ÅÃ“W --- */
/* ===== MOBILE (<=768px) â€“ peÅ‚ny pakiet stylÃ³w ===== */
@media (max-width: 768px) {

  /* Layout i typografia */
  body { padding: 1.25rem 0.75rem; }
  .container { padding: 1.25rem 1rem; }
  h1 { font-size: 1.9rem; line-height: 1.2; }
  h2 { font-size: 1.4rem; line-height: 1.25; }
  h3 { font-size: 1.05rem; line-height: 1.3; }

  /* Formularze i przyciski */
  .form-group { margin: 1.1rem 0; }
  label { font-size: 0.85rem; }
  select, .radio-group { font-size: 0.95rem; padding: 0.7rem 0.9rem; }
  .radio-group { gap: .75rem; justify-content: space-between; }
  .radio-group label { display: flex; align-items: center; gap: .4rem; }
  .button-group { flex-direction: column; gap: .75rem; }
  button, .button { width: 100%; padding: 0.85rem 1rem; }

  /* Karuzela losowania */
  #carousel-container { height: 100px; margin: 1.25rem 0; }
  .carousel-item { width: 88px; height: 88px; margin: 0 6px; }
  .carousel-item .icon { font-size: 2rem; }
  .carousel-item .name { font-size: 0.7rem; }

  /* Licznik czasu */
  #countdown-timer { gap: .6rem; margin: 1rem 0; font-size: 0.85rem; }
  #countdown-timer div { width: 72px; padding: 0.6rem; }
  #countdown-timer span { font-size: 2rem; }

  /* Dymek z poradami */
  #tip-bubble { max-width: 100%; margin-top: 1rem; padding: .85rem 1rem; }
  #tip-bubble p { font-size: .9rem; }

  /* Podsumowanie (statystyki) */
  #summary-stats { 
    flex-wrap: wrap; 
    gap: .5rem; 
    justify-content: space-between; 
    padding: .75rem; 
  }
  #summary-stats span { flex: 1 1 calc(50% - .5rem); text-align: center; }

  /* ===== Tabela wynikÃ³w â†’ kafelki ===== */
  #results-table thead { display: none !important; }
  #results-table { border-collapse: separate; width: 100%; }
  #results-table tbody { display: block; }
  #results-table tbody tr {
    display: block;
    margin: 0 0 1rem;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    background: rgba(15, 52, 96, 0.25);
  }
  #results-table tbody tr:nth-child(even) { background: rgba(15, 52, 96, 0.25); }
  #results-table td {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: .75rem;
    padding: .65rem .85rem;
    border: 0;
    text-align: right;
    white-space: normal;
    word-break: break-word;
  }
  #results-table td::before {
    content: attr(data-label);
    font-weight: 600;
    color: var(--text-muted);
    text-align: left;
    margin-right: .75rem;
  }

  /* ===== Sekcja â€SzczegÃ³Å‚y Imprezyâ€ ===== */
  .details-section { padding: 0 .5rem; }
  .details-section h2 { font-size: 1.6rem; margin-bottom: .25rem; }
  .details-box {
    padding: 1rem;
    border: 1px solid var(--border-color);
    background: rgba(15, 52, 96, 0.45);
  }
  .details-box h3 { font-size: 1.05rem; line-height: 1.3; gap: .4rem; }
  .details-box p { font-size: .95rem; }

  /* Transport: tabela â†’ karty */
  .transport-table { display: block; width: 100%; border-collapse: separate; border-spacing: 0; }
  .transport-table tbody {
    display: grid;
    grid-template-columns: 1fr;
    gap: .75rem;
  }
  .transport-table tr {
    display: grid;
    grid-template-columns: 1fr;
    background: rgba(15, 52, 96, 0.35);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: .75rem .9rem;
  }
  .transport-table td { display: block; border: 0; padding: .25rem 0; }
  .transport-table td:first-child {
    width: auto;
    white-space: normal;
    font-weight: 700;
    color: var(--text-color);
    display: flex;
    align-items: center;
    gap: .5rem;
    padding-bottom: .25rem;
  }
  .transport-table td:last-child { color: var(--text-muted); padding-top: 0; }
  .transport-icon { width: 28px; text-align: center; flex: 0 0 28px; }

  /* Galerie map â€“ jedna kolumna */
  .map-gallery { flex-direction: column; gap: .75rem; align-items: stretch; }
  .map-gallery img { width: 100%; max-width: 100%; border-radius: 12px; }

  /* Lightbox â€“ Å‚atwiejsze trafienie kciukiem */
  #lightbox .close { top: 1rem; right: 1rem; font-size: 2.5rem; padding: .25rem .5rem; }

  /* Galeria kuchni â€“ ciaÅ›niejsze kafelki */
  .cuisine-gallery { gap: 6px; }
  .cuisine-gallery .carousel-item { width: 80px; height: 80px; }
  .cuisine-gallery .carousel-item .icon { font-size: 1.8rem; }
  .cuisine-gallery .carousel-item .name { font-size: .68rem; }

  /* Dodatkowe oddechy pod sekcjÄ… wynikÃ³w */
  #results-section { padding-bottom: .5rem; }
}


		
		/* Zmniejszamy rozmiar kafelkÃ³w wewnÄ…trz galerii */
		.cuisine-gallery .carousel-item {
		    width: 85px;  /* Nowa, mniejsza szerokoÅ›Ä‡ */
		    height: 85px; /* Nowa, mniejsza wysokoÅ›Ä‡ */
		    margin: 0;    /* Usuwamy stary margines na rzecz wÅ‚aÅ›ciwoÅ›ci 'gap' */
		}
		
		/* Zmniejszamy ikonÄ™, aby pasowaÅ‚a do mniejszego kafelka */
		.cuisine-gallery .carousel-item .icon {
		    font-size: 2rem;
		}
		
		/* Zmniejszamy tekst pod ikonÄ… */
		.cuisine-gallery .carousel-item .name {
		    font-size: 0.7rem;
		    font-weight: 500;
		}
		
		/* Style dla zajÄ™tych, przekreÅ›lonych kuchni */
		.cuisine-gallery .carousel-item.unavailable {
		    opacity: 0.4;
		    filter: grayscale(1);
		    text-decoration: line-through;
		    cursor: not-allowed;
		    transform: none; /* WyÅ‚Ä…cza efekt "podnoszenia siÄ™" przy najechaniu myszkÄ… */
		}
		
		/* Dodatkowa reguÅ‚a, aby na pewno nie byÅ‚o efektu hover na zajÄ™tych */
		.cuisine-gallery .carousel-item.unavailable:hover {
		    transform: none;
		    box-shadow: none;
		}
		/* --- NOWE STYLE DLA LICZNIKA --- */
		#countdown-timer {
		    display: flex;
		    justify-content: center;
		    gap: 1rem;
		    margin: 1.5rem 0;
		    font-weight: 300;
		    font-size: 0.9rem;
		    color: var(--text-muted);
		}
		#countdown-timer div {
		    background-color: rgba(15, 52, 96, 0.4);
		    padding: 0.8rem;
		    border-radius: 8px;
		    width: 80px;
		    text-align: center;
		}
		#countdown-timer span {
		    display: block;
		    font-size: 2.5rem;
		    font-weight: 700;
		    color: var(--primary-color);
		    line-height: 1.1;
		}
		/* --- NOWE STYLE DLA DYMKU Z PORADAMI --- */
		#tip-bubble {
    position: relative; /* Potrzebne do pozycjonowania "ogonka" */
    margin: 2.5rem auto 0; /* ZwiÄ™kszony margines gÃ³rny dla "ogonka" */
    max-width: 80%;
    /* Nowy, atrakcyjny gradient */
    background: linear-gradient(145deg, var(--border-color), var(--card-color));
    border: 1px solid var(--border-color);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); /* WyraÅºniejszy cieÅ„ */
    padding: 1.2rem 1.8rem;
    border-radius: var(--border-radius); /* ZaokrÄ…glenie rogÃ³w */
    text-align: center;
    transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
    opacity: 0; /* DomyÅ›lnie ukryty */
    transform: translateY(20px);
}

/* --- NOWE STYLE DLA POWIADOMIEÅƒ TYPU TOAST --- */
/* --- ZAKTUALIZOWANE STYLE DLA POWIADOMIEÅƒ TYPU TOAST --- */
#toast-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 10px;
    z-index: 2000;
    width: clamp(280px, 80vw, 350px);
    /* Zapobiega "przeciekaniu" klikniÄ™Ä‡ na elementy pod spodem */
    pointer-events: none; 
}

.toast-notification {
    width: 100%;
    background: linear-gradient(145deg, var(--border-color), var(--card-color));
    color: var(--text-color);
    padding: 16px 20px;
    border-radius: 12px;
    border: 1px solid #0f3460;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    font-size: 0.9rem;
    line-height: 1.5;
    pointer-events: auto; /* UmoÅ¼liwia klikanie w powiadomienie */
    
    /* Nowa, poÅ‚Ä…czona animacja trwajÄ…ca 7.5s */
    animation: toast-lifecycle 10.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;}

/* Ta klasa jest teraz uÅ¼ywana tylko do natychmiastowego usuniÄ™cia */
.toast-notification.exit {
    animation: slideOut 0.5s cubic-bezier(0.5, 0, 0.75, 0) forwards;
}
		/* Dodaj tÄ™ klasÄ™ w sekcji <style> */
.toast-name-highlight {
    color: var(--primary-color);
    font-weight: 600;
}

/* ZMIANA: Zaktualizowane klatki kluczowe dla dÅ‚uÅ¼szego czasu */
@keyframes toast-lifecycle {
    /* Faza wejÅ›cia (0s -> 0.5s) */
    0% { transform: translateX(120%); }
    5% { transform: translateX(0); } /* 0.5s / 10.5s â‰ˆ 5% */
    
    /* Faza wyÅ›wietlania (0.5s -> 10s) */
    95% { transform: translateX(0); } /* 10s / 10.5s â‰ˆ 95% */

    /* Faza wyjÅ›cia (10s -> 10.5s) */
    100% { transform: translateX(120%); }
}

@keyframes slideOut {
    from { transform: translateX(0); }
    to { transform: translateX(120%); }
}


/* --- STYLE DLA TELEFONÃ“W --- */
@media (max-width: 768px) {
    #toast-container {
        right: 10px;
        bottom: 10px;
        left: 10px;
        width: auto;
    }
}
    </style>
</head>
<body>
<div id="lightbox" class="hidden">
        <span class="close">&times;</span>
        <img id="lightbox-img" src="">
    </div>

    <div class="container">
        <div id="content-wrapper">
             <div id="step-invite">
                <h1>DomÃ³wka: Kuchnie Åšwiata! ğŸ—ºï¸</h1>
                <h3>Zaproszenie na epickÄ… podrÃ³Å¼ kulinarnÄ…</h3>
				 <div id="countdown-timer">
				    <div><span id="days">00</span>Dni</div>
				    <div><span id="hours">00</span>Godzin</div>
				    <div><span id="minutes">00</span>Minut</div>
				    <div><span id="seconds">00</span>Sekund</div>
				</div>

                <p>Zanim przejdziemy dalej, odpowiedz na jedno, arcywaÅ¼ne pytanie...</p>
                <h2>Czy <u>4 paÅºdziernika</u> masz ochotÄ™ uczestniczyÄ‡ w tej imprezie?</h2>
                <div class="lore-section">
                    <p>ğŸŒ¶ï¸ <strong>Idea jest prosta:</strong> KaÅ¼dy uczestnik (lub para) losuje kuchniÄ™ i przygotowuje jedno, charakterystyczne dla niej danie.</p>
                    <p>ğŸ² <strong>Na miejscu czekajÄ…:</strong> Zacne trunki, gry bez prÄ…du, integracja i ploteczki do oporu.</p>
                     <p>ğŸ¤ <strong>Cel:</strong> SprÃ³bowaÄ‡ pysznego jedzenia i Å›wietnie siÄ™ bawiÄ‡ w doborowym towarzystwie!</p>
                </div>

                <div class="details-box" style="margin-top: 2rem; text-align: left;">
                    <h3 style="text-align: center;">ğŸ² Pula DostÄ™pnych Kuchni</h3>
                    <div class="cuisine-gallery" id="cuisine-gallery-invite">
                        </div>
                </div>
                                <div class="button-group">
                    <button id="btn-attend-yes">ğŸ‰ Tak, bÄ™dÄ™!</button>
                    <button id="btn-attend-no" class="secondary">ğŸ˜¢ Niestety, nie tym razem</button>
                </div>
            </div>

            <div id="step-details" class="hidden">
                <h2>Super, Å¼e bÄ™dziesz!</h2>
                <p>UzupeÅ‚nij jeszcze dwie rzeczy, abyÅ›my mogli wszystko przygotowaÄ‡.</p>
                <div class="form-group">
                    <label>Jestem...</label>
                    <select id="person-select"></select>
                </div>
                <div class="form-group">
                    <label>Czy bÄ™dziesz z osobÄ… towarzyszÄ…cÄ…?</label>
                    <div class="radio-group" id="guest-choice">
                        <label><input type="radio" name="guest" value="yes" checked> Tak</label>
                        <label><input type="radio" name="guest" value="no"> Nie</label>
                    </div>
                </div>
                <button id="btn-to-drawing">PrzejdÅº do losowania</button>
            </div>

            <div id="step-drawing" class="hidden">
                <h2>Czas na losowanie!</h2>
                <p>Kliknij przycisk i poznaj swoje kulinarne przeznaczenie.</p>
                <div id="carousel-container">
                    <div id="carousel-pointer"></div>
                    <div id="carousel-track"></div>
                </div>
                <button id="spin-button">Rozpocznij losowanie!</button>
            </div>
			<div id="step-refuse" class="hidden">
				<h2>Czy na pewno? ğŸ¤”</h2>
				<p>Wybierz swoje imiÄ™ z listy, aby potwierdziÄ‡, Å¼e jednak CiÄ™ nie bÄ™dzie.</p>
				<div class="form-group">
					<label>Jestem...</label>
					<select id="refuse-person-select"></select>
				</div>
				<div class="button-group">
					<button id="btn-confirm-refusal" class="secondary">Potwierdzam rezygnacjÄ™</button>
					<button id="btn-cancel-refusal">Jednak bÄ™dÄ™!</button>
				</div>
			</div>

        </div>
        
        <div id="results-section">
Â  Â  Â  Â  Â  Â  <h2 id="result-announcement"></h2>
            
            <div id="summary-stats">
                <span>âœ… Potwierdzeni: <strong id="stats-attending">0</strong></span>
                <span>âŒ Odmowy: <strong id="stats-declined">0</strong></span>
                <span>â” Czekamy: <strong id="stats-pending">0</strong></span>
            </div>
            Â  Â  Â  Â  Â  Â  <h3>Aktualna lista goÅ›ci i kuchni</h3>
            <table id="results-table">
                <thead>
                    <tr>
                        <th>ImiÄ™</th>
                        <th>ObecnoÅ›Ä‡</th>
                        <th>+1</th>
                        <th>Wylosowana Kuchnia</th>
                    </tr>
                </thead>
                <tbody id="history-body">
                    <tr><td colspan="4">Åadowanie danych...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="container details-section">
        <h2>SzczegÃ³Å‚y Imprezy</h2>
        
        <div class="details-box">
            <h3>ğŸ—“ï¸ Czas, Miejsce i Zasady</h3>
            <p><strong>Kiedy:</strong> Sobota, 4 paÅºdziernika 2025, start o <strong>18:00</strong>.<br>
               <strong>Gdzie:</strong> ul. Awicenny 32a/12, WrocÅ‚aw.</p>
            <p style="margin-bottom: 0;">KaÅ¼da osoba/para przygotowuje <strong>tylko jedno danie</strong> z wylosowanej kuchni. Prosimy nie przynosiÄ‡ za duÅ¼o jedzenia, aby nic siÄ™ nie zmarnowaÅ‚o!</p>
        </div>

        <div class="details-box">
            <h3>ğŸ¥‚ Alkohole i NastrÃ³j</h3>
            <p>ğŸ· Zapewniamy podstawowe iloÅ›ci <strong>wina biaÅ‚ego wytrawnego</strong>.<br>
               ğŸ¥ƒ DostÄ™pna bÄ™dzie rÃ³wnieÅ¼ butelka <strong>whisky</strong>.<br>
               ğŸ§Š Dla fanÃ³w mocniejszych trunkÃ³w czekaÄ‡ bÄ™dzie zmroÅ¼ona <strong>wÃ³dka</strong>.<br>
               ğŸ¥¤ OczywiÅ›cie postawiÄ™ teÅ¼ kilka <strong>napojÃ³w bezalkoholowych</strong> i przekÄ…sek.<br>
               ğŸ‘• ObowiÄ…zuje strÃ³j <strong>luÅºny i wygodny</strong>.<br>
               ğŸ˜Š NastrÃ³j: <strong>poprawny</strong> (przynajmniej na starcie)!
            </p>
        </div>

         <div class="details-box">
            <h3>â— WaÅ¼ne Info / Alergeny</h3>
            <p style="margin-bottom: 0;">ğŸˆâ€â¬› OstrzeÅ¼enie dla alergikÃ³w i pedantÃ³w! W domu rezydujÄ… dwa koty (<strong>czarny âš«</strong> i <strong>biaÅ‚o-bury âšª</strong>). Ich sierÅ›Ä‡ jest integralnÄ… czÄ™Å›ciÄ… wystroju mieszkania i na pewno wyjdziecie niÄ… oblepieni. Zapewniamy rolkÄ™ do ubraÅ„! âœ¨</p>
        </div>

        <div class="details-box">
            <h3>ğŸš— Transport i Dojazd</h3>
            <table class="transport-table">
                <tbody>
                    <tr><td><span class="transport-icon">âœˆï¸</span> Lotnisko</td><td>ok. 20 min samochodem</td></tr>
                    <tr><td><span class="transport-icon">ğŸš†</span> Dworzec Zach.</td><td>ok. 5 min pieszo ğŸš¶</td></tr>
                    <tr><td><span class="transport-icon">ğŸ…¿ï¸</span> Parking Biedronka</td><td>2 min pieszo ğŸš¶</td></tr>
                    <tr><td><span class="transport-icon">ğŸšŒ</span> <strong>Chachaja</strong></td><td>Linia: 132 (pod samym domem)</td></tr>
                    <tr><td><span class="transport-icon">ğŸšŒ</span> <strong>Jordanowska</strong></td><td>Linie: 132, 125, 907, 947 (4 min pieszo ğŸš¶)</td></tr>
                    <tr><td><span class="transport-icon">ğŸšŒ</span> <strong>Wiejska</strong></td><td>Linie: 107, 119, 125, 132, 143, 251, 257, 319, 607, 907, 947 (7 min pieszo ğŸš¶)</td></tr>
                    <tr><td><span class="transport-icon">ğŸšŠ</span> <strong>PÄ™tla OporÃ³w</strong></td><td>Tramwaje: 4, 11, 20. Autobusy: 107, 119, 125, 143, 251, 319 (8 min pieszo ğŸš¶)</td></tr>
                    <tr><td><span class="transport-icon">ğŸš¢</span> Statek</td><td>Ruch morski niedostÄ™pny</td></tr>
                    <tr><td><span class="transport-icon">ğŸ›¸</span> Dron</td><td>Ruch dronowy dostÄ™pny tylko ze wschodu</td></tr>
                </tbody>
            </table>
        </div>

         <div class="details-box">
            <h3>ğŸ—ºï¸ Mapy Dojazdu (kliknij, aby powiÄ™kszyÄ‡)</h3>
<div class="map-gallery">
  <img src="1.png" alt="Mapa okolicy" loading="lazy" decoding="async">
  <img src="2.png" alt="Mapa transportu" loading="lazy" decoding="async">
  <img src="3.png" alt="Mapa parkingu" loading="lazy" decoding="async">
</div>
        </div>
    </div>
    <div id="toast-container"></div>

<script>
// 1. KONFIGURACJA
const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzwGqjTi-HuolG4nSiv2ekMlkm7c2-bd9TqYvJoiRZ7xPaZITdulpg7imLZUSRuelDauA/exec';
const MAX_RETRIES = 5;

// 2. REFERENCJE DO ELEMENTÃ“W DOM
const naggingQuestions = [
    "Ale na pewno? BÄ™dzie pyszne jedzonko...",
    "A co z doborowym towarzystwem? Tego teÅ¼ nie chcesz?",
    "PowaÅ¼nie? Nawet koty bÄ™dÄ… tÄ™skniÄ‡...",
    "Ostatnia szansa... MoÅ¼e jednak siÄ™ skusisz?",
    "To ostateczna decyzja? Bez Ciebie to nie bÄ™dzie to samo!"
];

const steps = {
    invite: document.getElementById('step-invite'),
    details: document.getElementById('step-details'),
    drawing: document.getElementById('step-drawing'),
    refuse: document.getElementById('step-refuse'), // Ta linia jest nowa
};
const contentWrapper = document.getElementById('content-wrapper');
const resultsSection = document.getElementById('results-section');
const personSelect = document.getElementById('person-select');
const historyBody = document.getElementById('history-body');
const spinButton = document.getElementById('spin-button');
const resultAnnouncement = document.getElementById('result-announcement');
const carouselTrack = document.getElementById('carousel-track');

// 3. STAN APLIKACJI
let appData = {
    participants: [],
    availableCuisines: []
};
let currentUser = { name: null };
let isSpinning = false;

// 4. FUNKCJE NAWIGACYJNE I WIDOKU
const goToStep = (stepName) => {
    Object.values(steps).forEach(step => step.classList.add('hidden'));
    if (steps[stepName]) {
        steps[stepName].classList.remove('hidden');
    }
};
	// POCZÄ„TEK NOWEJ FUNKCJI
const updateSummaryStats = () => {
    if (!appData.participants) return;

    let attendingCount = 0;
    let declinedCount = 0;
    let pendingCount = 0;

    appData.participants.forEach(p => {
        if (p.attending === true) {
            attendingCount++; // Osoba z listy
            if (p.guest) {
                attendingCount++; // Jej osoba towarzyszÄ…ca
            }
        } else if (p.attending === false) {
            declinedCount++;
        } else { // p.attending jest null
            pendingCount++;
        }
    });

    document.getElementById('stats-attending').textContent = attendingCount;
    document.getElementById('stats-declined').textContent = declinedCount;
    document.getElementById('stats-pending').textContent = pendingCount;
};
const renderInviteCuisineGallery = () => {
    const gallery = document.getElementById('cuisine-gallery-invite');
    if (!gallery || !appData.participants || !appData.availableCuisines) return;

    gallery.innerHTML = '';

    const drawnCuisines = appData.participants
        .filter(p => p.cuisine)
        .map(p => {
            const parts = p.cuisine.split(' ');
            const icon = parts.pop();
            const name = parts.join(' ');
            return { name, icon };
        });

    const allCuisines = [...appData.availableCuisines, ...drawnCuisines];
    allCuisines.sort((a, b) => a.name.localeCompare(b.name));
    const availableNames = new Set(appData.availableCuisines.map(c => c.name));

    allCuisines.forEach(cuisine => {
        const item = document.createElement('div');
        item.className = 'carousel-item';
        if (!availableNames.has(cuisine.name)) {
            item.classList.add('unavailable');
        }
        item.innerHTML = `<span class="icon">${cuisine.icon}</span><span class="name">${cuisine.name}</span>`;
        gallery.appendChild(item);
    });
};

const renderHistoryTable = () => {
	updateSummaryStats();
	renderInviteCuisineGallery();
    historyBody.innerHTML = '';
    if (!appData.participants || appData.participants.length === 0) {
        historyBody.innerHTML = '<tr><td colspan="4">Brak danych o uczestnikach.</td></tr>';
        return;
    }
    appData.participants.forEach(p => {
        const row = document.createElement('tr');
        const attendingText = p.attending === null ? 'â”' : (p.attending ? 'âœ… Tak' : 'âŒ Nie');
        const guestText = p.attending ? (p.guest ? 'ğŸ‘¤ Tak' : 'â– Nie') : 'â–';
        const cuisineText = p.attending ? (p.cuisine || '<em>Czeka na losowanie</em>') : 'â–';
        row.innerHTML = `<td data-label="ImiÄ™">${p.base}</td><td data-label="ObecnoÅ›Ä‡">${attendingText}</td><td data-label="+1">${guestText}</td><td data-label="Kuchnia">${cuisineText}</td>`;
        historyBody.appendChild(row);
    });
};

const initializeCarousel = (cuisines) => {
    carouselTrack.innerHTML = '';
    const extendedCuisines = [...cuisines, ...cuisines, ...cuisines, ...cuisines, ...cuisines];
    
    extendedCuisines.forEach(cuisine => {
        const item = document.createElement('div');
        item.className = 'carousel-item';
        item.innerHTML = `<span class="icon">${cuisine.icon}</span><span class="name">${cuisine.name}</span>`;
        carouselTrack.appendChild(item);
    });
};
	

// 5. LOGIKA DANYCH I API
const delay = ms => new Promise(res => setTimeout(res, ms));

const fetchWithRetry = async (url, options, retries = MAX_RETRIES) => {
    for (let i = 0; i <= retries; i++) {
        try {
            const response = await fetch(url, options);
            if (!response.ok) {
                 throw new Error(`BÅ‚Ä…d HTTP: ${response.status}`);
            }
            return response;
        } catch (error) {
            console.error(`PrÃ³ba ${i + 1} nieudana:`, error.message);
            if (i === retries) {
                console.error("OsiÄ…gniÄ™to maksymalnÄ… liczbÄ™ prÃ³b. PoddajÄ™ siÄ™.");
                throw error;
            }
            await delay(1000 * (i + 1)); // Czekaj 1, 2, 3... sekundy
        }
    }
};

	
	const cuisineTips = {
    "default": [
        "Ciekawe, kto pierwszy zapyta o hasÅ‚o do Wi-Fi...",
        "Plotka gÅ‚osi, Å¼e gospodarze ukryli najlepsze trunki. Czas na poszukiwania!",
        "PamiÄ™taj: kalorie zjedzone w dobrym towarzystwie nie tuczÄ…. To fakt naukowy.",
        "Trwa zakulisowa walka o to, kto przyniesie najlepsze danie. Stawki sÄ… wysokie.",
        "Koty juÅ¼ oceniajÄ…, czyje kolana bÄ™dÄ… dziÅ› najlepszym tronem. Przygotuj siÄ™.",
		"JeÅ›li komuÅ› nie posmakuje jedzenie, zawsze moÅ¼emy zamÃ³wiÄ‡ pizzÄ™ i udawaÄ‡, Å¼e to kuchnia wÅ‚oska.",
		 "PamiÄ™taj, impreza jest o 18 a nie 21:37!",
    "WÅ›rÃ³d nas jest podobno kulinarny ekspert, ktÃ³ry o kaÅ¼dym daniu powie 'ja bym to zrobiÅ‚/a inaczej'.",
    "JeÅ›li jedzenie nie zostanie sfotografowane i wrzucone na Insta, to znaczy, Å¼e siÄ™ nie liczy.",
    "Prosimy o nieporuszanie tematÃ³w polityki i religii. Chyba, Å¼e naprawdÄ™ lubicie chaos.",
    "SÅ‚uchajcie uwaÅ¼nie, bo najlepsze plotki bÄ™dÄ… serwowane miÄ™dzy daniem gÅ‚Ã³wnym a deserem.",
    "JeÅ›li coÅ› siÄ™ przypali, wystarczy powiedzieÄ‡, Å¼e to 'wÄ™dzony' akcent. Nikt siÄ™ nie zorientuje.",
    "KtoÅ› na pewno jest na diecie, ale pamiÄ™tajcie - 'jutro' to idealny dzieÅ„, Å¼eby zaczÄ…Ä‡ od nowa.",
    "PamiÄ™taj o zdjÄ™ciu butÃ³w. Gospodarze zainwestowali w nowy dywan, a nie chcemy 'inby'."
    ],
      "Niemiecka": [
        "SÅ‚yszaÅ‚em, Å¼e ${name} wjeÅ¼dÅ¼a ze sznyclem wielkoÅ›ci maski od Passata. To musi byÄ‡ prawda.",
        "Ciekawe, czy danie, ktÃ³re przygotuje ${name}, bÄ™dzie miaÅ‚o niemieckÄ… precyzjÄ™. KaÅ¼dy ziemniak pod linijkÄ™.",
        "${name} ma kuchniÄ™ niemieckÄ…... Oby to nie byÅ‚ tylko wurst z musztardÄ…, bo bÄ™dzie 'zaorane'.",
        "Podobno ${name} robi saÅ‚atkÄ™ ziemniaczanÄ…. Oby byÅ‚a tak solidna i niezawodna jak niemiecka motoryzacja.",
        "Mam nadziejÄ™, Å¼e ${name} nie potraktuje nas samymi 'kartoflami'. Czekamy na kulinarny blitzkrieg!",
		  "Ciekawe, czy danie, ktÃ³re zrobi ${name}, bÄ™dzie tak solidne jak Most RÄ™dziÅ„ski. Oczekujemy monumentalnej konstrukcji smaku!",
"JeÅ›li danie od ${name} bÄ™dzie niedobre, to wyÅ›lemy je MPK na Psie Pole. I tak nie dojedzie."
    ],
    "Angielska": [
        "Kuchnia angielska... ${name}, liczymy, Å¼e to nie bÄ™dzie fasolka na toÅ›cie, bo zrobimy kulinarny Brexit.",
        "Ciekawe, czy ${name} o 17:00 zrobi przerwÄ™ na herbatkÄ™. Z mlekiem czy bez?",
        "JeÅ›li ${name} robi Yorkshire pudding, to rezerwujÄ™ sobie od razu trzy. Na wynos teÅ¼.",
        "Danie przygotowane przez ${name} albo bÄ™dzie 'lovely', albo... cÃ³Å¼, przynajmniej pogoda jest Å‚adna. Oh, wait.",
        "Fish & Chips? ${name}, mam nadziejÄ™, Å¼e ryba nie bÄ™dzie sucha jak angielski humor.",
		"Podobno ${name} robi danie tak blade, Å¼e wyglÄ…da jak turysta z Anglii po zwiedzaniu wrocÅ‚awskiego Rynku w deszczu.",
"Fish & Chips? ${name}, mam nadziejÄ™, Å¼e frytki nie bÄ™dÄ… tak wiotkie jak tory tramwajowe na OÅ‚awskiej."
    ],
    "Indyjska": [
        "${name} i kuchnia indyjska. Przygotujcie kubki smakowe na jazdÄ™ bez trzymanki... i szklanki z mlekiem.",
        "Podobno ${name} robi butter chicken tak kremowy, Å¼e aÅ¼ chce siÄ™ powiedzieÄ‡ 'dej, mam horom curke na gluten'.",
        "Ciekawe, czy curry, ktÃ³re zaserwuje ${name}, bÄ™dzie miaÅ‚o tyle kolorÃ³w, co scena taÅ„ca w filmie z Bollywood.",
        "JeÅ›li ${name} przywiezie coÅ› naprawdÄ™ ostrego, to oficjalnie otwieramy zawody 'kto pierwszy zapÅ‚acze'.",
        "PonoÄ‡ ${name} potrafi tak doprawiÄ‡ danie, Å¼e smakuje jak podrÃ³Å¼ do Bombaju. Bez biletu i wizy.",
		"SÅ‚yszaÅ‚em, Å¼e ${name} gotuje tak ostro, Å¼e aÅ¼ krasnale pod domem szukajÄ… Odry, Å¼eby siÄ™ schÅ‚odziÄ‡.",
"Curry od ${name} podobno ma barwÄ™ ostrzegawczÄ…, jak komunikaty MPK o kolejnym wykolejeniu. Wchodzimy na wÅ‚asne ryzyko!"
    ],
    "GruziÅ„.": [
        "Gaumarjos! ${name} i kuchnia gruziÅ„ska. Oby chaczapuri miaÅ‚o tyle sera, co kot napÅ‚akaÅ‚... i to duÅ¼o kotÃ³w.",
        "SÅ‚yszaÅ‚em, Å¼e ${name} szykuje chinkali. BÄ™dzie instruktaÅ¼ jedzenia, Å¼eby caÅ‚y misterny plan nie poszedÅ‚ w...",
        "JeÅ›li ${name} przyniesie prawdziwe gruziÅ„skie wino, to toasty bÄ™dÄ… trwaÅ‚y do rana. KaÅ¼dy po kolei.",
        "${name}, czy Twoje danie bÄ™dzie tak goÅ›cinne i otwarte jak serca GruzinÃ³w? Liczymy na to!",
        "ChodzÄ… sÅ‚uchy, Å¼e ${name} ma przepis na adÅ¼arskie tak dobry, Å¼e aÅ¼ chce siÄ™ tam zamieszkaÄ‡.",
		"JeÅ›li chaczapuri, ktÃ³re zrobi ${name}, bÄ™dzie miaÅ‚o za maÅ‚o sera, to zrobimy takÄ… inbÄ™, jakiej TrÃ³jkÄ…t Bermudzki nie widziaÅ‚.",
"Podobno ${name} toasty wznosi z takim zapaÅ‚em, Å¼e aÅ¼ Iglica siÄ™ trzÄ™sie. Czekamy na pokaz!"
    ],
    "Hiszp.": [
        "Â¡OlÃ©! ${name} ma kuchniÄ™ hiszpaÅ„skÄ…. Czekamy na paellÄ™ czy raczej na sjestÄ™ po jedzeniu?",
        "Ciekawe, czy danie od ${name} bÄ™dzie tak gÅ‚oÅ›ne i Å¼ywioÅ‚owe jak rozmowa HiszpanÃ³w w barze tapas.",
        "Czy to prawda, Å¼e ${name} robi sangriÄ™? JeÅ›li tak, to 'maÃ±ana' nikt nie idzie do pracy.",
        "Tapas to podobno nie jedzenie, to styl Å¼ycia. ${name}, pokaÅ¼ nam, jak siÄ™ Å¼yje!",
        "${name} i jego/jej patatas bravas... Oby sos byÅ‚ ostry jak temperament torreadora.",
		"Fiesta u ${name} bÄ™dzie tak dobra, Å¼e skoÅ„czymy o Å›wicie, szukajÄ…c drogi do domu jak zagubiony krasnal.",
"Czy to prawda, Å¼e sangria od ${name} jest tak mocna, Å¼e po jednym kubku tramwaj Plus sam wydaje siÄ™ dobrym pomysÅ‚em?"
    ],
    "Francuska": [
        "Bonjour! ${name} i kuchnia francuska. Czy bÄ™dzie coÅ›, czego nazwy nie bÄ™dziemy umieli wymÃ³wiÄ‡?",
        "JeÅ›li ${name} robi zupÄ™ cebulowÄ…, to mam nadziejÄ™, Å¼e bÄ™dzie miaÅ‚a grzankÄ™ z serem grubÄ… na palec.",
        "Podobno ${name} przyniesie Å›limaki. OdwaÅ¼ni zjedzÄ…, reszta bÄ™dzie robiÄ‡ zdjÄ™cia na Insta.",
        "Elegancja-Francja! Ciekawe, czy danie od ${name} bÄ™dzie wymagaÅ‚o uÅ¼ycia wiÄ™cej niÅ¼ jednego widelca.",
        "CrÃ¨me brÃ»lÃ©e? ${name}, liczymy na idealnie chrupiÄ…cÄ… skorupkÄ™. BÄ™dziemy stukaÄ‡ Å‚yÅ¼eczkami!",
		"Podobno ${name} robi danie tak wykwintne, Å¼e je siÄ™ je z zadartym nosem, patrzÄ…c z gÃ³ry na innych jak z wieÅ¼y Sky Tower.",
"Bagietka od ${name} jest podobno dÅ‚uÅ¼sza niÅ¼ korek na moÅ›cie Grunwaldzkim w godzinach szczytu."
    ],
    "Czeska": [
        "Ahoj! ${name} gotuje po czesku. Oby knedliki byÅ‚y tak puszyste jak Krecik z bajki.",
        "SmaÅ¾enÃ½ sÃ½r... ${name}, czy to prawda, Å¼e ser bÄ™dzie siÄ™ ciÄ…gnÄ…Å‚ aÅ¼ do Pragi?",
        "JeÅ›li ${name} zrobi gulasz, to mam nadziejÄ™, Å¼e bÄ™dzie tak dobry, Å¼e aÅ¼ sÄ…siedzi wpadnÄ… na kontrolÄ™.",
        "Podobno do dania od ${name} najlepiej pasuje zimny napÃ³j chmielowy. KtoÅ› sprawdzaÅ‚?",
        "Ciekawe, czy danie od ${name} bÄ™dzie miaÅ‚o sens, czy to bÄ™dzie 'czeski film'.",
		"Czeski film! ${name} gotuje tak blisko granicy, Å¼e aÅ¼ czuÄ‡ zapach knedlikÃ³w na Dworcu GÅ‚Ã³wnym.",
"SmaÅ¾enÃ½ sÃ½r, ktÃ³ry przygotuje ${name}, podobno bÄ™dzie siÄ™ ciÄ…gnÄ…Å‚ dÅ‚uÅ¼ej niÅ¼ budowa tramwaju na Nowy DwÃ³r."
    ],
    "Grecka": [
        "Opa! ${name} i kuchnia grecka! Czy bÄ™dzie taniec Zorby i tÅ‚uczenie talerzy?",
        "Moussaka, ktÃ³rÄ… rzekomo robi ${name}, ma podobno wiÄ™cej warstw niÅ¼ grecki dÅ‚ug publiczny.",
        "JeÅ›li ${name} zaserwuje fetÄ™, to sprawdzimy, czy jest prawdziwa, czy to tylko 'ser typu greckiego'.",
        "Souvlaki? ${name}, mam nadziejÄ™, Å¼e bÄ™dÄ… tak dobre, Å¼e aÅ¼ bogowie na Olimpie poczujÄ… zazdroÅ›Ä‡.",
        "Czekamy na danie od ${name}. Oby byÅ‚o tak sÅ‚oneczne i beztroskie jak wakacje na Krecie.",
		"JeÅ›li ${name} bÄ™dzie tÅ‚uc talerze, to mam nadziejÄ™, Å¼e z wiÄ™kszÄ… precyzjÄ… niÅ¼ motorniczy MPK wjeÅ¼dÅ¼ajÄ…cy na zwrotnicÄ™.",
"Feta od ${name} ma byÄ‡ tak sÅ‚ona jak woda w Hydropolis. Prawda to?"
    ],
    "JapoÅ„ska": [
        "Konnichiwa! ${name} i Japonia na talerzu. Oby sushi byÅ‚o zwiniÄ™te ciaÅ›niej niÅ¼ budÅ¼et na koniec miesiÄ…ca.",
        "Ciekawe, czy ${name} potrafi jeÅ›Ä‡ paÅ‚eczkami, czy bÄ™dzie prosiÄ‡ o 'sprzÄ™t dla poczÄ…tkujÄ…cych'.",
        "Podobno wasabi, ktÃ³re przyniesie ${name}, potrafi zresetowaÄ‡ ustawienia fabryczne w mÃ³zgu.",
        "Ramen? ${name}, liczymy na bulion tak gÅ‚Ä™boki, jak przemyÅ›lenia po obejrzeniu anime Evangelion.",
        "JeÅ›li danie od ${name} bÄ™dzie miaÅ‚o smak umami, to znaczy, Å¼e impreza jest udana.",
		"Sushi, ktÃ³re zrobi ${name}, musi byÄ‡ idealnie zwiniÄ™te. Inaczej bÄ™dzie wstyd na caÅ‚e Krzyki.",
"Ramen od ${name} ma podobno takÄ… moc, Å¼e po zjedzeniu moÅ¼na zobaczyÄ‡ wszystkie 600 wrocÅ‚awskich krasnali naraz."
    ],
    "KoreaÅ„.": [
        "Annyeong! ${name} wlatuje z kuchniÄ… koreaÅ„skÄ…. Oby kimchi nie pachniaÅ‚o na caÅ‚Ä… klatkÄ™ schodowÄ….",
        "Bibimbap to podobno 'caÅ‚y ten baÅ‚agan w misce'. ${name}, pokaÅ¼ nam, jak siÄ™ robi artystyczny nieÅ‚ad!",
        "JeÅ›li ${name} robi coÅ› ostrego, to niech lepiej powie, gdzie jest najbliÅ¼szy sklep z nabiaÅ‚em.",
        "Fani K-Popu Å‚Ä…czcie siÄ™! ${name} robi bulgogi. MoÅ¼e nawet zataÅ„czymy jakiÅ› ukÅ‚ad?",
        "Danie od ${name} bÄ™dzie tak dobre, Å¼e aÅ¼ powiemy 'saranghaeyo' do talerza.",
		"Kimchi od ${name} jest ponoÄ‡ tak intensywne w zapachu, Å¼e aÅ¼ tynk odpada w Hali Stulecia.",
"SÅ‚yszaÅ‚em, Å¼e danie od ${name} jest tak ostre, Å¼e aÅ¼ Afrykarium wydaje siÄ™ chÅ‚odnym, przyjemnym miejscem."
    ],
    "Meksyk.": [
        "Â¡Arriba! ${name} i kuchnia meksykaÅ„ska! Pytanie wieczoru: jak ostre bÄ™dzie 'Å›rednio ostre'?",
        "SÅ‚yszaÅ‚em, Å¼e ${name} robi guacamole tak dobre, Å¼e leczy zÅ‚amane serca i pusty portfel.",
        "JeÅ›li ${name} przyniesie tacos, to niech nikt nie prÃ³buje jeÅ›Ä‡ ich noÅ¼em i widelcem. BÄ™dzie ban.",
        "Czy to prawda, Å¼e po daniu od ${name} bÄ™dziemy krzyczeÄ‡ 'AY, CARAMBA!'? Sprawdzimy.",
        "Mam nadziejÄ™, Å¼e tequila do popicia teÅ¼ bÄ™dzie. ${name}, nie zawiedÅº nas!",
		"Po zjedzeniu tacos od ${name} podobno robi siÄ™ tak gorÄ…co, Å¼e czÅ‚owiek sam chce wskoczyÄ‡ do fontanny na Rynku.",
"JeÅ›li danie od ${name} bÄ™dzie zbyt ostre, to bÄ™dziemy szukaÄ‡ pomocy szybciej niÅ¼ MPK nowego autobusu na zastÄ™pstwo."
    ],
    "Portugalska": [
        "OlÃ¡! ${name} i kuchnia portugalska. Czy bÄ™dzie Cristiano Ronaldo na talerzu? A nie, to tylko dorsz.",
        "Pastel de nata to podobno maÅ‚e dzieÅ‚a sztuki. ${name}, liczymy na Twoje zdolnoÅ›ci artystyczne!",
        "Bacalhau moÅ¼na przyrzÄ…dziÄ‡ na 365 sposobÃ³w. Ciekawe, ktÃ³ry z nich wybraÅ‚/a ${name}.",
        "JeÅ›li danie od ${name} bÄ™dzie zawieraÄ‡ owoce morza, to miejmy nadziejÄ™, Å¼e sÄ… Å›wieÅ¼sze niÅ¼ newsy w TV.",
        "Portugalia to nie tylko Porto. ${name}, udowodnij, Å¼e Twoje danie jest rÃ³wnie warte odkrycia!",
				"Danie, ktÃ³re przygotuje ${name}, ma byÄ‡ tak dobre, Å¼e aÅ¼ szkoda bÄ™dzie jechaÄ‡ na wakacje do Portugalii. WrocÅ‚aw wystarczy!",
"Pastel de nata od ${name}? Lepsze to niÅ¼ stanie w kolejce do kas zoo w sÅ‚onecznÄ… niedzielÄ™."
    ],
    "Tajska": [
        "Sawasdee! ${name} i kuchnia tajska. Balans smakÃ³w czy ostry chaos? Oto jest pytanie.",
        "Pad thai, ktÃ³re zrobi ${name}, musi mieÄ‡ idealnÄ… harmoniÄ™. Jak yin i yang, tylko Å¼e z makaronem.",
        "Zielone curry od ${name}? Mam nadziejÄ™, Å¼e jest na mleczku kokosowym, a nie na Å‚zach naszych wrogÃ³w.",
        "Poziom ostroÅ›ci 'dla Polaka' czy 'dla Taja'? ${name}, okreÅ›l siÄ™, bo to kluczowa informacja.",
        "JeÅ›li jedzenie bÄ™dzie dobre, to wszyscy zrobimy 'wai' (ukÅ‚on) w podziÄ™kowaniu dla ${name}.",
"SÅ‚yszaÅ‚em, Å¼e ${name} gotuje tak ostro, Å¼e Odra zmienia swÃ³j bieg, byle dalej od tej kuchni.",
"Curry od ${name} ma byÄ‡ tak Å¼Ã³Å‚te jak stare tramwaje Konstal, ktÃ³re wciÄ…Å¼ jeÅ¼dÅ¼Ä… po mieÅ›cie. Oby byÅ‚o smaczniejsze."
    ],
    "Turecka": [
        "Merhaba! ${name} i kuchnia turecka. Pytanie numer jeden: na grubym czy na cienkim?",
        "JeÅ›li ${name} robi baklavÄ™, to lepiej schowajcie wagÄ™ na najbliÅ¼szy tydzieÅ„. BÄ™dzie sÅ‚odko i kalorycznie.",
        "Kebab od szefa kuchni ${name}. Oby byÅ‚ tak dobry, jak ten o 4 nad ranem w centrum miasta.",
        "Hummus, ktÃ³ry podobno robi ${name}, jest tak kremowy, Å¼e moÅ¼na go uÅ¼ywaÄ‡ jako maseczki. Ale lepiej zjeÅ›Ä‡.",
        "Ciekawe, czy ${name} bÄ™dzie siÄ™ targowaÄ‡ o ostatni kawaÅ‚ek swojego dania. Jak na Grand Bazaar.",
		"Kebab od ${name} ma byÄ‡ tak dobry, Å¼e aÅ¼ wszystkie budy z kebabem koÅ‚o Dworca GÅ‚Ã³wnego zwijajÄ… interes.",
"Czy to prawda, Å¼e ${name} robi kawÄ™ po turecku tak mocnÄ…, Å¼e stawia na nogi szybciej niÅ¼ informacja o awarii na MoÅ›cie Zwierzynieckim?"
    ],
    "Wietnam.": [
        "Xin chÃ o! ${name} serwuje Wietnam. Czy zupa Pho bÄ™dzie lekiem na caÅ‚e zÅ‚o tego Å›wiata? Miejmy nadziejÄ™.",
        "Chrupanie sajgonek od ${name} podobno bÄ™dzie sÅ‚ychaÄ‡ w caÅ‚ym wojewÃ³dztwie. Cisza na planie!",
        "Podobno ${name} robi BÃ¡nh mÃ¬. To kanapka tak legendarna, Å¼e ma wÅ‚asny fanklub. ZapisujÄ™ siÄ™!",
        "Kawa po wietnamsku teÅ¼ bÄ™dzie? ${name}, nie rzucaj sÅ‚Ã³w na wiatr, bo narobisz nadziei.",
        "Danie od ${name} bÄ™dzie tak Å›wieÅ¼e i zioÅ‚owe, Å¼e poczujemy siÄ™ jak na skuterze w Hanoi.",
		"Zupa Pho od ${name} podobno pachnie tak intensywnie, Å¼e czuÄ‡ jÄ… aÅ¼ na Psim Polu, mimo Å¼e ${name} mieszka na GÄ…dowie.",
"Sajgonki od ${name} bÄ™dÄ… tak chrupiÄ…ce, jak dÅºwiÄ™k wykolejajÄ…cego siÄ™ tramwaju. Oby byÅ‚y przyjemniejsze w odbiorze."
    ],
    "WÅ‚oska": [
        "Mamma mia! ${name} i kuchnia wÅ‚oska. Ananas na pizzy jest oficjalnie zakazany, prawda?",
        "Podobno tiramisu, ktÃ³re robi ${name}, jest tak dobre, Å¼e anioÅ‚y Å›piewajÄ…. Czekamy na ten niebiaÅ„ski chÃ³r.",
        "Spaghetti od ${name}? Ciekawe, kto pierwszy upapra sobie caÅ‚Ä… koszulÄ™ sosem.",
        "JeÅ›li ${name} robi carbonarÄ™, to sprawdzimy, czy jest na Å›mietanie. BÄ™dzie afera.",
        "WÅ‚osi podobno rozmawiajÄ… rÄ™kami. Ciekawe, czy danie od ${name} bÄ™dzie tak ekspresyjne.",
		"Pizza od ${name} ma byÄ‡ tak duÅ¼a, Å¼e trzeba jÄ… bÄ™dzie transportowaÄ‡ jak elementy Mostu RÄ™dziÅ„skiego.",
"JeÅ›li carbonara od ${name} bÄ™dzie na Å›mietanie, to chyba kogoÅ› wyÅ›lemy na przymusowe zwiedzanie Hydropolis, dla zrozumienia, czym jest woda."
    ],
    "Polska": [
        "No siema! ${name} i kuchnia polska. Schabowy bÄ™dzie z kostkÄ… czy bez? To waÅ¼ne.",
        "Pierogi od ${name}... Lepsze niÅ¼ u mamy? OdwaÅ¼na deklaracja, zobaczymy, co z tego wyjdzie.",
        "SÅ‚yszaÅ‚em, Å¼e bigos, ktÃ³ry gotuje ${name}, ma tyle lat, co wÄ™giel. Musi byÄ‡ dobry.",
        "JeÅ›li ${name} zrobiÅ‚/a saÅ‚atkÄ™ jarzynowÄ…, to pytanie brzmi: z groszkiem czy bez? To dzieli rodziny.",
        "RosÃ³Å‚ od ${name} podobno leczy wszystko, od kaca po zÅ‚amane serce. Potrzebujemy go!",
		"Schabowy od ${name} podobno bÄ™dzie tak duÅ¼y, Å¼e przykryje caÅ‚y Rynek, razem z krasnalami.",
"Bigos, ktÃ³ry przynosi ${name}, jest podobno tak kwaÅ›ny, Å¼e aÅ¼ mordki lwÃ³w przy Placu Jana PawÅ‚a II siÄ™ wykrzywiajÄ…."
    ]
};
	

	// --- NOWY SYSTEM POWIADOMIEÅƒ TOAST ---

// Globalna playlista i interwaÅ‚
let messagePlaylist = [];
let toastInterval = null;

// Funkcja do pokazywania pojedynczego powiadomienia
// ZASTÄ„P TÄ˜ FUNKCJÄ˜ PONIÅ»SZÄ„ WERSJÄ„
const showToast = (message) => {
    const container = document.getElementById('toast-container');
    if (!container) return;

    const isMobile = window.innerWidth <= 768;
    const maxToasts = isMobile ? 1 : 6;

    if (isMobile && container.children.length > 0) {
        for (const child of container.children) {
             child.classList.add('exit');
             setTimeout(() => child.remove(), 500);
        }
    }

    while (container.children.length >= maxToasts) {
        const oldestToast = container.children[0];
        oldestToast.classList.add('exit');
        setTimeout(() => oldestToast.remove(), 500);
        oldestToast.remove();
    }
    
    const toast = document.createElement('div');
    toast.className = 'toast-notification';

    // --- NOWA LOGIKA DO STYLOWANIA IMIENIA ---
    // Zamieniamy %%ImiÄ™%% na <span class="toast-name-highlight">ImiÄ™</span>
    const styledMessage = message.replace(/%%(.*?)%%/g, `<span class="toast-name-highlight">$1</span>`);
    
    // UÅ¼ywamy innerHTML zamiast textContent, aby style zadziaÅ‚aÅ‚y
    toast.innerHTML = styledMessage;

    toast.addEventListener('animationend', () => {
        toast.remove();
    });

    container.appendChild(toast);
};

// GÅ‚Ã³wna funkcja inicjujÄ…ca system
// ZASTÄ„P CAÅÄ„ STARÄ„ FUNKCJÄ˜ TÄ„ NOWÄ„ WERSJÄ„
const initializeToastSystem = () => {
    // Pule tekstÃ³w: osobno domyÅ›lne, osobno spersonalizowane
    let defaultTips = [];
    let personalizedTipsPool = []; // Struktura: [{ name: 'ImiÄ™', tips: ['tekst 1', 'tekst 2'] }]
    
    // Ta funkcja buduje pulÄ™ spersonalizowanych tekstÃ³w na podstawie aktualnych danych
    const updatePools = () => {
        // Zawsze pobieraj Å›wieÅ¼Ä… listÄ™ domyÅ›lnych tekstÃ³w
        defaultTips = [...cuisineTips.default];

        // WyczyÅ›Ä‡ i zbuduj na nowo pulÄ™ spersonalizowanych tekstÃ³w
        personalizedTipsPool = [];
        const confirmedGuests = appData.participants.filter(p => p.attending === true && p.cuisine);

        if (confirmedGuests.length > 0) {
            confirmedGuests.forEach(guest => {
                const cuisineFullName = guest.cuisine;
                const cuisineBaseName = Object.keys(cuisineTips).find(key => cuisineFullName.startsWith(key));
                
                if (cuisineBaseName && cuisineTips[cuisineBaseName]) {
                    // Dodajemy obiekt z imieniem i *szablonami* tekstÃ³w
                    personalizedTipsPool.push({
                        name: guest.base,
                        tips: cuisineTips[cuisineBaseName]
                    });
                }
            });
        }
    };

    // Uruchom interwaÅ‚, ktÃ³ry bÄ™dzie losowaÅ‚ i wyÅ›wietlaÅ‚ powiadomienia
    if (toastInterval) clearInterval(toastInterval);

    toastInterval = setInterval(() => {
        let message = "";

        // Losowanie: 75% szans na tekst spersonalizowany (jeÅ›li sÄ… dostÄ™pne)
        if (personalizedTipsPool.length > 0 && Math.random() < 0.75) {
            // 1. Wylosuj osobÄ™
            const randomPersonIndex = Math.floor(Math.random() * personalizedTipsPool.length);
            const personData = personalizedTipsPool[randomPersonIndex];
            
            // 2. Wylosuj tekst dla tej osoby
            const randomTipIndex = Math.floor(Math.random() * personData.tips.length);
            const tipTemplate = personData.tips[randomTipIndex];
            
            // 3. Wstaw imiÄ™ do szablonu (ze znacznikami do kolorowania)
            message = tipTemplate.replace(/\$\{name\}/g, `%%${personData.name}%%`);
        } else {
            // W przeciwnym wypadku (lub gdy nie ma tekstÃ³w spersonalizowanych), wylosuj tekst domyÅ›lny
            if (defaultTips.length > 0) {
                const randomDefaultIndex = Math.floor(Math.random() * defaultTips.length);
                message = defaultTips[randomDefaultIndex];
            }
        }

        // JeÅ›li udaÅ‚o siÄ™ wylosowaÄ‡ wiadomoÅ›Ä‡, pokaÅ¼ jÄ…
        if (message) {
            showToast(message);
        }
    }, 5000); // Nowe powiadomienie co 5 sekund

    // Zaktualizuj pule po raz pierwszy (zanim zaÅ‚adujÄ… siÄ™ dane, `personalizedTipsPool` bÄ™dzie puste)
    updatePools();

    // ZwrÃ³Ä‡ funkcjÄ™ aktualizujÄ…cÄ…, aby `loadData` mogÅ‚o jej uÅ¼yÄ‡
    return updatePools;
};
	
const loadData = async () => {
    try {
        const response = await fetchWithRetry(GOOGLE_SCRIPT_URL); 
        const data = await response.json();
        appData = data;
        renderHistoryTable();
        populatePersonSelect();
        populateRefuseSelect();
		        if (window.updateToastPools) window.updateToastPools();
    } catch (error) {
        console.error("BÅ‚Ä…d Å‚adowania danych z Google Sheets:", error);
        historyBody.innerHTML = '<tr><td colspan="4">Nie udaÅ‚o siÄ™ zaÅ‚adowaÄ‡ danych. OdÅ›wieÅ¼ stronÄ™.</td></tr>';
    }
};

const saveData = async () => {
    try {
        await fetchWithRetry(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            redirect: "follow", 
            headers: {
                "Content-Type": "text/plain;charset=utf-8",
            },
            body: JSON.stringify(appData)
        });
        // Po zapisie odÅ›wieÅ¼amy dane, aby mieÄ‡ pewnoÅ›Ä‡, Å¼e wszystko jest aktualne
        await loadData();
    } catch (error) {
        console.error("BÅ‚Ä…d zapisu danych do Google Sheets:", error);
        resultAnnouncement.innerHTML = `<h2 style="color:red">BÅ‚Ä…d zapisu! SprÃ³buj ponownie.</h2>`;
    }
};


const populatePersonSelect = () => {
    personSelect.innerHTML = '';
    let availablePeople = 0;
    if (appData.participants) {
        appData.participants.forEach(p => {
            if (p.attending === null || (p.attending && !p.cuisine)) {
                const option = document.createElement('option');
                option.value = p.base;
                option.textContent = p.declined;
                personSelect.appendChild(option);
                availablePeople++;
            }
        });
    }
    if (availablePeople === 0) {
        document.getElementById('step-details').innerHTML = '<p>WyglÄ…da na to, Å¼e wszyscy juÅ¼ wziÄ™li udziaÅ‚. Zobacz wyniki poniÅ¼ej!</p>';
    }
};

const startCarousel = () => {
    if (isSpinning) return;
    const availableCuisines = appData.availableCuisines;
    if (!availableCuisines || availableCuisines.length === 0) {
        alert("Wszystkie kuchnie zostaÅ‚y juÅ¼ wylosowane!");
        return;
    }

    isSpinning = true;
    spinButton.disabled = true;

    const randomIndex = Math.floor(Math.random() * availableCuisines.length);
    const selectedCuisine = availableCuisines[randomIndex];

    const targetIndex = availableCuisines.length + randomIndex;
    const itemWidth = 120;
    const targetPosition = - (targetIndex * itemWidth) + (carouselTrack.parentElement.clientWidth / 2) - (itemWidth / 2);

    carouselTrack.classList.add('spinning');
    carouselTrack.style.left = `${targetPosition}px`;

    setTimeout(async () => {
        const cuisineString = selectedCuisine.name + " " + selectedCuisine.icon;
        resultAnnouncement.innerHTML = `<h2>Gratulacje, <span style="color:var(--primary-color)">${currentUser.name}!</span></h2>
                                      <p>Twoje przeznaczenie to: <strong>${cuisineString}</strong></p>`;
        
        const personIndex = appData.participants.findIndex(p => p.base === currentUser.name);
        if (personIndex > -1) {
            appData.participants[personIndex].cuisine = cuisineString;
            appData.availableCuisines.splice(randomIndex, 1);
        }
        
        await saveData();
        isSpinning = false;
        contentWrapper.classList.add('hidden');
    }, 5100);
};
// DODAJ caÅ‚Ä… tÄ™ nowÄ… funkcjÄ™
const populateRefuseSelect = () => {
    const refuseSelect = document.getElementById('refuse-person-select');
    refuseSelect.innerHTML = '';
    let availablePeople = 0;
    if (appData.participants) {
        appData.participants.forEach(p => {
            // PokaÅ¼ osoby niezdecydowane (null) lub te, ktÃ³re juÅ¼ potwierdziÅ‚y (true)
            if (p.attending === null || p.attending === true) {
                const option = document.createElement('option');
                option.value = p.base;
                option.textContent = p.declined;
                refuseSelect.appendChild(option);
                availablePeople++;
            }
        });
    }
    if (availablePeople === 0) {
        document.getElementById('step-refuse').innerHTML = '<p>WyglÄ…da na to, Å¼e wszyscy juÅ¼ podjÄ™li ostatecznÄ… decyzjÄ™!</p>';
    }
};

// DODAJ caÅ‚Ä… tÄ™ nowÄ… funkcjÄ™
const handleRefusal = async () => {
    const refuseSelect = document.getElementById('refuse-person-select');
    const name = refuseSelect.value;
    if (!name) return;

    // PÄ™tla z mÄ™czÄ…cymi pytaniami
    for (const question of naggingQuestions) {
        if (!confirm(question)) {
            alert("Uff, co za ulga! Dobrze, Å¼e zostajesz! ğŸ˜„");
            goToStep('invite');
            return; // Przerwij proces odmowy
        }
    }

    const personIndex = appData.participants.findIndex(p => p.base === name);
    if (personIndex > -1) {
        const person = appData.participants[personIndex];

        // SprawdÅº, czy osoba miaÅ‚a przypisanÄ… kuchniÄ™
        if (person.cuisine) {
            const cuisineString = person.cuisine;
            // Proste parsowanie: "Nazwa Kuchni  ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸"
            const parts = cuisineString.split(' ');
            const icon = parts.pop();
            const cuisineName = parts.join(' ');
            
            // StwÃ³rz obiekt kuchni i dodaj go z powrotem do puli
            const returnedCuisine = { name: cuisineName, icon: icon };
            appData.availableCuisines.push(returnedCuisine);
            
            // Opcjonalnie: sortuj listÄ™ kuchni dla porzÄ…dku
            appData.availableCuisines.sort((a, b) => a.name.localeCompare(b.name));
        }

        // Zaktualizuj dane osoby
        person.attending = false;
        person.guest = false; // Resetuj osobÄ™ towarzyszÄ…cÄ…
        person.cuisine = null; // UsuÅ„ kuchniÄ™

        await saveData();
        contentWrapper.classList.add('hidden');
        resultAnnouncement.innerHTML = `<h2>Szkoda, Å¼e CiÄ™ nie bÄ™dzie, ${name}.</h2><p>DziÄ™ki za informacjÄ™! Do zobaczenia nastÄ™pnym razem.</p>`;
    }
};

// 7. INICJALIZACJA I OBSÅUGA ZDARZEÅƒ
document.addEventListener('DOMContentLoaded', () => {
    
    document.getElementById('btn-attend-yes').addEventListener('click', () => {
	    goToStep('details');
	    // DODANA LINIA: PÅ‚ynne przewiniÄ™cie do nowego widoku
	    document.getElementById('step-details').scrollIntoView({ behavior: 'smooth', block: 'center' });
	});

    document.getElementById('btn-attend-no').addEventListener('click', () => {
		goToStep('refuse');
	});
	
	document.getElementById('btn-confirm-refusal').addEventListener('click', handleRefusal);
	document.getElementById('btn-cancel-refusal').addEventListener('click', () => goToStep('invite'));
    
    document.getElementById('btn-to-drawing').addEventListener('click', () => {
        currentUser.name = personSelect.value;
        const personData = appData.participants.find(p => p.base === currentUser.name);

        if (personData && personData.cuisine) {
            alert('JuÅ¼ braÅ‚eÅ›/aÅ› udziaÅ‚ w losowaniu! Zobacz swÃ³j wynik w tabeli.');
            contentWrapper.classList.add('hidden');
            resultAnnouncement.innerHTML = `<h2>TwÃ³j wynik jest juÅ¼ w tabeli, ${personData.base}!</h2>`;
            return;
        }

        const personIndex = appData.participants.findIndex(p => p.base === currentUser.name);
        if (personIndex > -1) {
            appData.participants[personIndex].attending = true;
            appData.participants[personIndex].guest = document.querySelector('input[name="guest"]:checked').value === 'yes';
        }
        
        initializeCarousel(appData.availableCuisines);
        goToStep('drawing');
		
    });

    spinButton.addEventListener('click', startCarousel);
    
    loadData();
    goToStep('invite');
	    window.updateToastPools = initializeToastSystem();
});
// --- DODATKOWA LOGIKA DLA GALERII MAP ---
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    const galleryImages = document.querySelectorAll('.map-gallery img');

    galleryImages.forEach(img => {
        img.addEventListener('click', () => {
            lightbox.classList.remove('hidden');
            lightbox.classList.add('active');
            lightboxImg.src = img.src;
        });
    });

    lightbox.addEventListener('click', (e) => {
        if (e.target !== e.currentTarget && e.target.tagName !== 'SPAN') return;
        lightbox.classList.remove('active');
        setTimeout(() => {
            lightbox.classList.add('hidden');
        }, 300);
    });
	const partyDate = new Date('2025-10-04T18:00:00').getTime();
const countdownInterval = setInterval(() => {
    const now = new Date().getTime();
    const distance = partyDate - now;

    if (distance < 0) {
        clearInterval(countdownInterval);
        document.getElementById('countdown-timer').innerHTML = "<h2>Impreza trwa w najlepsze!</h2>";
        return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById('days').innerText = String(days).padStart(2, '0');
    document.getElementById('hours').innerText = String(hours).padStart(2, '0');
    document.getElementById('minutes').innerText = String(minutes).padStart(2, '0');
    document.getElementById('seconds').innerText = String(seconds).padStart(2, '0');
}, 1000);

</script>

</body>
</html>
































